<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Snake Game</title>

<style>
/* ---------- PAGE ---------- */
body{
  margin:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#0f172a;
  font-family:Arial, sans-serif;
  color:white;
}

.game{
  width:95%;
  max-width:500px;
  text-align:center;
}

/* ---------- SCORE ---------- */
.score{
  font-size:20px;
  margin-bottom:10px;
}

/* ---------- GAME AREA ---------- */
.game-area{
  background:#020617;
  border-radius:16px;
  padding:10px;
}

/* ---------- CANVAS ---------- */
canvas{
  background:#020617;
  width:100%;           /* üî• RESPONSIVE */
  height:auto;
  border-radius:12px;
  border:2px solid #334155;
}

/* ---------- MOBILE BUTTONS ---------- */
.controls{
  display:grid;
  grid-template-columns:repeat(3, 1fr);
  gap:10px;
  margin-top:15px;
}

.controls button{
  padding:15px;
  font-size:20px;
  border:none;
  border-radius:10px;
  background:#1e293b;
  color:white;
}

.controls button:active{
  background:#334155;
}

/* ---------- HIDE CONTROLS ON DESKTOP ---------- */
@media(min-width:700px){
  .controls{ display:none; }
}
</style>
</head>

<body>

<div class="game">
  <h2>üêç Snake Game</h2>
  <div class="score">Score: <span id="score">0</span></div>

  <div class="game-area">
    <canvas id="game"></canvas>
  </div>

  <!-- MOBILE CONTROLS -->
  <div class="controls">
    <div></div>
    <button onclick="setDir(0,-1)">‚¨ÜÔ∏è</button>
    <div></div>

    <button onclick="setDir(-1,0)">‚¨ÖÔ∏è</button>
    <button onclick="reset()">üîÑ</button>
    <button onclick="setDir(1,0)">‚û°Ô∏è</button>

    <div></div>
    <button onclick="setDir(0,1)">‚¨áÔ∏è</button>
    <div></div>
  </div>
</div>

<script>
/* ---------- CANVAS SETUP ---------- */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

/* AUTO RESIZE */
function resize(){
  canvas.width = canvas.offsetWidth;
  canvas.height = canvas.offsetWidth;
}
window.addEventListener("resize", resize);
resize();

/* ---------- GAME VARIABLES ---------- */
const grid = 20;
let snake, food, dir, score, game;

/* ---------- START GAME ---------- */
function start(){
  snake = [{x:10,y:10}];
  dir = {x:1,y:0};
  food = randFood();
  score = 0;
  document.getElementById("score").innerText = score;

  clearInterval(game);
  game = setInterval(loop, 120); // SPEED
}
start();

/* ---------- GAME LOOP ---------- */
function loop(){
  const head = {
    x: snake[0].x + dir.x,
    y: snake[0].y + dir.y
  };

  /* WALL COLLISION */
  if(head.x<0 || head.y<0 || head.x>=grid || head.y>=grid || hit(head)){
    start();
    return;
  }

  snake.unshift(head);

  /* FOOD */
  if(head.x===food.x && head.y===food.y){
    score++;
    document.getElementById("score").innerText = score;
    food = randFood();
  }else{
    snake.pop();
  }

  draw();
}

/* ---------- DRAW ---------- */
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  const size = canvas.width / grid;

  /* FOOD */
  ctx.fillStyle = "red";
  ctx.fillRect(food.x*size, food.y*size, size, size);

  /* SNAKE */
  ctx.fillStyle = "lime";
  snake.forEach(s=>{
    ctx.fillRect(s.x*size, s.y*size, size-1, size-1);
  });
}

/* ---------- HELPERS ---------- */
function hit(pos){
  return snake.some(s=>s.x===pos.x && s.y===pos.y);
}

function randFood(){
  return {
    x: Math.floor(Math.random()*grid),
    y: Math.floor(Math.random()*grid)
  };
}

/* ---------- CONTROLS ---------- */
function setDir(x,y){
  if(dir.x === -x && dir.y === -y) return;
  dir = {x,y};
}

document.addEventListener("keydown", e=>{
  if(e.key==="ArrowUp") setDir(0,-1);
  if(e.key==="ArrowDown") setDir(0,1);
  if(e.key==="ArrowLeft") setDir(-1,0);
  if(e.key==="ArrowRight") setDir(1,0);
});

function reset(){
  start();
}
</script>

</body>
</html>
