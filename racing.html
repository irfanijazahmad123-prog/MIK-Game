<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Extreme Speed Racing</title>

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family: Arial, sans-serif;
}

body{
    background:#020617;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
}

/* Game Area */
.game{
    position:relative;
    width:90vw;
    max-width:420px;
    height:85vh;
    max-height:700px;
    background:#111;
    border-radius:18px;
    overflow:hidden;
    border:2px solid #38bdf8;
}

/* Road */
.road{
    position:absolute;
    width:100%;
    height:200%;
    background:
        repeating-linear-gradient(
            to bottom,
            #333 0px,
            #333 40px,
            #fff 40px,
            #fff 70px
        );
    animation: roadMove 1s linear infinite;
}

@keyframes roadMove{
    to{ transform: translateY(50%); }
}

/* Player Car */
.player{
    position:absolute;
    bottom:20px;
    left:50%;
    transform:translateX(-50%);
    width:40px;
    height:70px;
    background:#22c55e;
    border-radius:10px;
}

/* Enemy Car */
.enemy{
    position:absolute;
    top:-80px;
    width:40px;
    height:70px;
    background:#ef4444;
    border-radius:10px;
    animation: enemyMove 3s linear forwards;
}

@keyframes enemyMove{
    to{ top:110%; }
}

/* Score */
.score{
    position:absolute;
    top:10px;
    left:10px;
    color:white;
    font-size:18px;
    z-index:10;
}
</style>
</head>

<body>

<div class="game" id="game">
    <div class="road"></div>
    <div class="score" id="score">Score: 0</div>
    <div class="player" id="player"></div>
</div>

<script>
const game = document.getElementById("game");
const player = document.getElementById("player");
const scoreText = document.getElementById("score");

let playerX = game.clientWidth / 2 - 20;
let score = 0;

/* Keyboard Controls */
document.addEventListener("keydown", e => {
    if(e.key === "ArrowLeft") movePlayer(-30);
    if(e.key === "ArrowRight") movePlayer(30);
});

/* Mobile Touch */
game.addEventListener("touchmove", e => {
    let touchX = e.touches[0].clientX - game.getBoundingClientRect().left;
    playerX = touchX - 20;
    updatePlayer();
});

function movePlayer(value){
    playerX += value;
    updatePlayer();
}

function updatePlayer(){
    playerX = Math.max(0, Math.min(game.clientWidth - 40, playerX));
    player.style.left = playerX + "px";
}

/* Enemy Creation */
function createEnemy(){
    const enemy = document.createElement("div");
    enemy.className = "enemy";
    enemy.style.left = Math.random() * (game.clientWidth - 40) + "px";
    game.appendChild(enemy);

    const collision = setInterval(() => {
        const eRect = enemy.getBoundingClientRect();
        const pRect = player.getBoundingClientRect();

        if(
            eRect.bottom > pRect.top &&
            eRect.top < pRect.bottom &&
            eRect.left < pRect.right &&
            eRect.right > pRect.left
        ){
            alert("ðŸ’¥ Crash!\nScore: " + score);
            location.reload();
        }
    }, 20);

    enemy.addEventListener("animationend", () => {
        clearInterval(collision);
        enemy.remove();
        score++;
        scoreText.innerText = "Score: " + score;
    });
}

/* Enemy Loop */
setInterval(createEnemy, 1200);
</script>

</body>
</html>
